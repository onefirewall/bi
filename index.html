<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <title>BI OneFirewall</title>
</head>

<body>
    <div class="container">
        <br>
        <div class="col-md-6">
            <!-- <h3 class="display-4">Pie Chart for IPs</h3> -->
        </div>

        <!-- <div class="col-md-4 text-center">
            <canvas id="ipChart" width="150" height="150"></canvas>
        </div> -->

        <div class="col-md-6">
            <canvas id="mycanvas" width="130" height="130"></canvas>
        </div>

    </div>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script> -->
    <script src="./node_modules/chart.js/dist/Chart.js"></script>
    <script src="./node_modules/chart.piecelabel.js/src/Chart.PieceLabel.js"></script>

        <script>
        var ctx = document.getElementById("mycanvas").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ["Public IPs used", "OneFirewall IPs"],
                datasets: [{
                    label: '# of IPs',
                    data: [4294, 2235],
                    backgroundColor: [
                        //'rgba(10, 139, 10, 2)',
                        //'rgba(255, 99, 132, 2)'
                        '#16a085',
                        '#ff3d67'
                    ],
                    borderColor: [
                        //'rgba(10, 139, 10, 1)',
                        //'rgba(255, 99, 132, 1)'
                        '#16a085',
                        '#ff3d67'

                    ],
                    borderWidth: 1,
                    //borderColor: '#777',
                    hoverBorderWidth: 3,
                    hoverBorderColor: '#000'
                }]
            },
            options: {
                animation: {
                    animateScale: true
                },
                title: {
                    display: true,
                    text: 'OneFirewall IPs',
                    fontSize: 25
                },
                legend: {
                    position: 'top'
                },
                pieceLabel: {
                    render: 'percentage',
                    precision: 4,
                    fontColor: ['white', 'white']
                }
            }
        });
    </script>

    <!-- <script>
        $(document).ready(function () {
            $.ajax({
                url: "http://localhost:3000/getipof",
                method: "GET",
                success: function (data) {
                    console.log(data.length);
                    //var totalOfIPs = 3740205056; //real value of total of public IPv4 on world, Class A, B, C
                    var totalOfIPs = 5056; //test value

                    var chartdata = {
                        labels: ["Public IPs used", "OneFirewall IPs"],
                        datasets: [
                            {
                                label: 'Number of IPs',
                                backgroundColor: [
                                    '#16a085',
                                    '#ff3d67'
                                ],
                                borderColor: [
                                    '#16a085',
                                    '#ff3d67'
                                ],
                                borderWidth: 1,
                                hoverBorderWidth: 3,
                                hoverBorderColor: '#000',
                                data: [totalOfIPs, data.length]
                            }
                        ]
                    };

                    var ctx = $("#mycanvas");

                    var barGraph = new Chart(ctx, {
                        type: 'pie',
                        data: chartdata,
                        options: {
                            animation: {
                                animateScale: true
                            },
                            title: {
                                display: true,
                                text: 'OneFirewall IPs',
                                fontSize: 25
                            },
                            legend: {
                                position: 'top'
                            },
                            pieceLabel: {
                                render: 'percentage',
                                precision: 4,
                                fontColor: ['white', 'white']
                            }
                        }
                    });
                },
                error: function (data) {
                    console.log(data);
                }
            });
        });
    </script> -->

</body>

</html>